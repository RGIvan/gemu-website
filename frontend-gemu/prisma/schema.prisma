generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model detalle_pedidos {
  id              BigInt      @id @default(autoincrement())
  pedido_id       BigInt
  cantidad        Int
  precio_unitario Decimal     @db.Decimal(10, 2)
  producto_id     BigInt      @default(0)
  subtotal        Decimal?    @db.Decimal(10, 2)
  pedidos         pedidos     @relation(fields: [pedido_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_detalle_pedidos_pedido")
  videojuegos     videojuegos @relation(fields: [producto_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fkktd3s1nepts92lj6covdnv7nl")
}

model facturas {
  id             BigInt    @id @default(autoincrement())
  pedido_id      BigInt
  fecha_emision  DateTime? @default(now()) @db.Timestamp(6)
  numero_factura String?   @db.VarChar(255)
  estado         String?   @db.VarChar(255)
  pedidos        pedidos   @relation(fields: [pedido_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_facturas_pedido")
}

model pedidos {
  id              BigInt            @id @default(autoincrement())
  usuario_id      BigInt
  fecha_pedido    DateTime?         @default(now()) @db.Timestamp(6)
  total_sin_iva   Decimal?          @db.Decimal(10, 2)
  iva_total       Decimal?          @db.Decimal(10, 2)
  total_con_iva   Decimal?          @db.Decimal(10, 2)
  metodo_pago     String?           @db.VarChar(20)
  direccion_envio String?           @db.VarChar(50)
  estado          String?           @db.VarChar(20)
  detalle_pedidos detalle_pedidos[]
  facturas        facturas[]
  usuarios        usuarios          @relation(fields: [usuario_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_pedidos_usuario")
}

model usuarios {
  id                 BigInt    @id @default(autoincrement())
  nombre             String    @db.VarChar(255)
  apellidos          String    @db.VarChar(255)
  direccion          String?   @db.VarChar(255)
  telefono           String?   @db.VarChar(255)
  correo_electronico String    @unique @db.VarChar(255)
  password           String    @db.VarChar(255)
  username           String    @db.VarChar(255)
  pedidos            pedidos[]
}

model videojuegos {
  id               BigInt            @id @default(autoincrement())
  codigo           String            @unique @db.VarChar(20)
  nombre           String            @db.VarChar(50)
  precio           Float             @db.Real
  existencias      Int
  categoria        String            @db.VarChar(50)
  num_jugadores    Int?
  edad_recomendada Int?
  plataforma       String            @db.VarChar(50)
  detalle_pedidos  detalle_pedidos[]
}
